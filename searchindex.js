Search.setIndex({"docnames": ["api", "api/alias", "api/eos", "api/math/random", "api/root", "api/root/io", "api/root/tree", "guide", "guide/howto", "guide/howto/construct_friend_tree", "guide/performance", "guide/performance/awkward", "index"], "filenames": ["api.rst", "api/alias.rst", "api/eos.rst", "api/math/random.rst", "api/root.rst", "api/root/io.rst", "api/root/tree.rst", "guide.rst", "guide/howto.rst", "guide/howto/construct_friend_tree.rst", "guide/performance.rst", "guide/performance/awkward.rst", "index.rst"], "titles": ["API reference", "Type Alias", "EOS", "Random Number Generators", "ROOT", "Basic I/O", "Tree", "User guide", "How-to", "Construct <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Friend</span></code> Tree", "Performance", "<code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">awkward</span></code>", "HEP tools"], "terms": {"type": [0, 5, 6], "alia": 0, "recordlik": [0, 1, 5, 6], "delayedrecordlik": [0, 1, 5, 6], "pathlik": [0, 1, 5, 6], "eo": [0, 1, 6], "root": [0, 1, 5, 6, 9], "heptool": [1, 2, 5, 6, 9], "io": [1, 5], "sourc": [1, 2, 5, 6, 9], "A": [1, 5, 6], "map": [1, 6], "from": [1, 5, 6, 9], "string": 1, "arrai": [1, 5, 6, 9], "like": [1, 6, 9], "object": [1, 5, 6, 9], "all": [1, 5, 6], "must": [1, 5], "have": 1, "same": [1, 5, 6, 9, 11], "length": [1, 5, 9], "ak": [1, 5, 6, 11], "panda": [1, 4, 5], "datafram": [1, 5], "dict": [1, 5, 6], "str": [1, 5, 6], "numpi": [1, 5], "ndarrai": [1, 5], "delai": [1, 5, 6], "partit": [1, 5, 6, 9], "dask_awkward": [1, 5], "dask": [1, 6, 9], "system": [1, 2], "path": [1, 2, 5, 6, 9], "__fspath__": 1, "method": [1, 6], "o": [1, 2, 4], "an": [2, 6, 9], "interfac": 2, "oper": [2, 6, 11], "both": [2, 5], "local": [2, 5], "filesystem": 2, "other": [2, 9], "xrootd": [2, 5], "support": [2, 5], "us": [2, 5, 6, 9, 11], "normpath": 2, "glob": 2, "class": [2, 5, 6, 9], "none": [2, 5, 6], "host": [2, 6, 9], "high": 4, "level": 4, "tool": [4, 6], "file": [4, 5, 6, 9], "i": [4, 6, 11], "built": [4, 6], "top": 4, "uproot": [4, 5], "import": [4, 9], "unless": 4, "necessari": 4, "base": [5, 6], "read": [5, 6, 9], "open": [5, 9], "_dask": 5, "write": [5, 6, 9], "writabl": 5, "recreat": 5, "reader": 5, "follow": [5, 6, 9, 10, 11], "default": [5, 6, 9], "option": [5, 6, 9], "object_cach": 5, "array_cach": 5, "open_fil": 5, "fals": [5, 6], "timeout": 5, "180": 5, "writer": 5, "alwai": 5, "overwrit": [5, 6], "output": [5, 6], "exist": [5, 6, 9], "test": [5, 6], "fsspec": 5, "_dask_writ": 5, "dask_writ": 5, "new_scalar_object": 5, "return": [5, 6, 9], "treewrit": [5, 6], "name": [5, 6, 9], "event": [5, 6, 9], "parent": [5, 6], "true": [5, 6, 9], "basket_s": 5, "remot": 5, "tbasket": 5, "size": [5, 6, 11], "control": 5, "paramet": [5, 6], "tree": 5, "bool": [5, 6], "creat": [5, 6], "directori": 5, "int": [5, 6], "If": [5, 6, 11], "given": [5, 6, 11], "new": [5, 6, 9], "each": [5, 6, 11], "extend": 5, "call": [5, 6, 9], "addit": [5, 6], "pass": [5, 6], "chunk": [5, 6, 9], "__call__": 5, "set": [5, 6], "self": [5, 6, 9], "__enter__": [5, 6], "temporari": 5, "__exit__": [5, 6], "exc": 5, "except": [5, 6, 11], "rais": 5, "move": 5, "store": [5, 6], "inform": 5, "data": [5, 6, 9, 11], "writabletre": 5, "treeread": [5, 6], "branch_filt": 5, "transform": 5, "callabl": [5, 6], "function": 5, "select": [5, 6, 11], "branch": [5, 6, 9], "after": [5, 6], "appli": [5, 6], "librari": [5, 6, 10], "liter": [5, 6], "np": [5, 6, 11], "pd": [5, 6], "The": [5, 6, 9], "repres": [5, 6], "behavior": 5, "tbranch": [5, 6], "hasbranch": 5, "concat": [5, 6], "one": [5, 6], "filter": 5, "add": [5, 6, 9, 11], "multiprocess": 5, "tupl": [5, 6], "One": [5, 6], "more": [5, 6], "concaten": [5, 6], "iter": [5, 6], "step": [5, 6, 9], "mode": [5, 6], "over": [5, 6], "number": [5, 6], "entri": [5, 6], "ignor": [5, 6], "balanc": [5, 6], "gener": [5, 6], "guarante": [5, 6], "need": 5, "last": [5, 6], "yield": [5, 6], "split": [5, 6], "smaller": [5, 6], "target": [5, 6, 9], "merg": [5, 6, 9], "resiz": [5, 6], "chunk_siz": [5, 6], "writer_opt": [5, 6], "reader_opt": [5, 6], "clean_sourc": 5, "clean": [5, 6], "remov": 5, "list": [5, 6], "num_entri": 6, "entry_start": 6, "entry_stop": [6, 9], "fetch": [6, 9], "ttree": 6, "uuid": [6, 9], "start": [6, 11], "0": 6, "stop": 6, "miss": 6, "metadata": [6, 9], "immedi": 6, "initi": [6, 9], "note": 6, "special": 6, "ar": [6, 11], "implement": 6, "__hash__": 6, "__eq__": 6, "__len__": 6, "__repr__": 6, "frozenset": 6, "properti": 6, "offset": 6, "equal": 6, "integr": 6, "check": 6, "report": 6, "differ": 6, "out": 6, "rang": 6, "deep": 6, "copi": [6, 11], "correct": 6, "deepcopi": 6, "kwarg": 6, "overrid": 6, "slice": 6, "classmethod": 6, "from_path": 6, "n_process": 6, "parallel": 6, "process": [6, 9], "common": 6, "find": 6, "onli": [6, 11], "common_branch": 6, "group": 6, "sum": 6, "order": 6, "preserv": 6, "kept": 6, "total": 6, "piec": 6, "possibl": 6, "try": 6, "anoth": [6, 11], "minim": 6, "averag": 6, "deviat": 6, "about": [6, 11], "to_json": 6, "convert": [6, 9], "json": [6, 9], "from_json": [6, 9], "from_coffea_ev": [6, 9], "when": 6, "coffea": 6, "7": 6, "22": 6, "processor": [6, 9], "runner": 6, "from_coffea_dataset": 6, "dataset": [6, 9], "2023": 6, "12": 6, "dataset_tool": 6, "preprocess": 6, "chain": 6, "friend": 6, "manag": 6, "collect": 6, "addtion": 6, "separ": 6, "also": [6, 9, 11], "known": 6, "__iadd__": 6, "__add__": 6, "see": 6, "auto_dump": 6, "contigu": 6, "base_path": 6, "executor": 6, "automat": 6, "dump": [6, 9], "memori": 6, "enabl": 6, "auto": 6, "statement": 6, "ad": 6, "format": 6, "below": [6, 9], "detail": 6, "_": 6, "least": 6, "submit": 6, "provid": 6, "task": 6, "run": [6, 9], "sequenti": 6, "current": 6, "thread": 6, "kei": 6, "correspond": 6, "avail": 6, "path0": 6, "path1": 6, "part": 6, "revers": 6, "where": 6, "To": [6, 9], "beyond": 6, "syntax": 6, "instead": [6, 11], "uniqu": 6, "multipl": 6, "previou": 6, "ones": [6, 11], "exampl": [6, 9, 11], "work": [6, 11], "1": [6, 11], "b": 6, "c": 6, "100": 6, "200": 6, "test_uuid_events_100_200_target": 6, "2": 6, "x": [6, 11], "y": [6, 11], "z": 6, "test_uuid_100_200": 6, "path2": 6, "tar_events_100_200": 6, "def": [6, 9], "filenam": 6, "f": [6, 9], "3": 6, "lower": 6, "reset": 6, "confirm": 6, "delet": [6, 11], "singl": 6, "origin": [6, 11], "clone": 6, "execut": [6, 11], "locat": 6, "simpli": 6, "replac": 6, "source0": 6, "source1": 6, "without": 6, "suffix": 6, "mismatch": 6, "gap": 6, "overlap": 6, "between": 6, "thi": [6, 9], "can": [6, 9, 11], "veri": [6, 11], "expens": [6, 11], "larg": [6, 9], "shallow": 6, "tchain": 6, "structur": [6, 11], "record": [6, 11], "pseudo": 6, "code": 6, "main": 6, "add_chunk": 6, "add_friend": 6, "renam": 6, "friend_onli": 6, "awkward_nest": 6, "nest": 6, "how": [7, 12], "perform": [7, 9, 12], "scratch": 9, "you": 9, "util": 9, "defaultencod": 9, "test_friend": 9, "target_tree_path": 9, "server": 9, "rootfil": 9, "target_tree_nam": 9, "some": [9, 11], "attach": 9, "test_friend_": 9, "_0_": 9, "save": 9, "w": 9, "cl": 9, "Then": 9, "retriev": 9, "load": 9, "r": 9, "friend_tree_path": 9, "friend_tree_nam": 9, "friendev": 9, "noth": 9, "so": 9, "line": 9, "omit": 9, "insid": 9, "For": [9, 11], "friendtreemak": 9, "processorabc": 9, "test_coffea_friend": 9, "accumul": 9, "wai": 9, "improv": 9, "merged_friend": 9, "100_000": [9, 11], "comput": 9, "otherprocessor": 9, "__init__": 9, "friend_path": 9, "todo": [9, 11], "match": 9, "back": 9, "up": 9, "These": 10, "document": 10, "describ": 10, "potenti": 10, "issu": 10, "best": 10, "practic": 10, "view": 11, "layout": 11, "let": 11, "": 11, "simpl": 11, "zip": 11, "dtype": 11, "int64": 11, "zero": 11, "consid": 11, "case": 11, "most": 11, "wrap": 11, "layer": 11, "make": 11, "random": 11, "choic": 11, "10": 11, "nbyte": 11, "3200080": 11, "But": 11, "actual": 11, "6mb": 11, "thei": 11, "share": 11, "content": 11, "instanc": 11, "hold": 11, "refer": 11, "del": 11, "gc": 11, "releas": 11, "until": 11}, "objects": {"heptools.math": [[3, 0, 0, "-", "random"]], "heptools": [[4, 0, 0, "-", "root"]], "heptools.root.chain": [[6, 1, 1, "", "Chain"], [6, 1, 1, "", "Friend"]], "heptools.root.chain.Chain": [[6, 2, 1, "", "add_chunk"], [6, 2, 1, "", "add_friend"], [6, 2, 1, "", "concat"], [6, 2, 1, "", "copy"], [6, 2, 1, "", "dask"], [6, 2, 1, "", "iterate"]], "heptools.root.chain.Friend": [[6, 2, 1, "", "add"], [6, 2, 1, "", "arrays"], [6, 2, 1, "", "auto_dump"], [6, 2, 1, "", "clone"], [6, 2, 1, "", "concat"], [6, 2, 1, "", "copy"], [6, 2, 1, "", "dask"], [6, 2, 1, "", "dump"], [6, 2, 1, "", "from_json"], [6, 2, 1, "", "integrity"], [6, 2, 1, "", "merge"], [6, 3, 1, "", "name"], [6, 2, 1, "", "reset"], [6, 4, 1, "", "targets"], [6, 2, 1, "", "to_json"]], "heptools.root.chunk": [[6, 1, 1, "", "Chunk"]], "heptools.root.chunk.Chunk": [[6, 2, 1, "", "balance"], [6, 3, 1, "", "branches"], [6, 2, 1, "", "common"], [6, 2, 1, "", "deepcopy"], [6, 4, 1, "", "entry_start"], [6, 4, 1, "", "entry_stop"], [6, 2, 1, "", "from_coffea_datasets"], [6, 2, 1, "", "from_coffea_events"], [6, 2, 1, "", "from_json"], [6, 2, 1, "", "from_path"], [6, 2, 1, "", "integrity"], [6, 3, 1, "", "name"], [6, 3, 1, "", "num_entries"], [6, 4, 1, "", "offset"], [6, 2, 1, "", "partition"], [6, 3, 1, "", "path"], [6, 2, 1, "", "slice"], [6, 2, 1, "", "to_json"], [6, 3, 1, "", "uuid"]], "heptools.root": [[5, 0, 0, "-", "io"]], "heptools.root.io": [[1, 5, 1, "", "DelayedRecordLike"], [1, 5, 1, "", "RecordLike"], [5, 1, 1, "", "TreeReader"], [5, 1, 1, "", "TreeWriter"]], "heptools.root.io.TreeReader": [[5, 2, 1, "", "arrays"], [5, 2, 1, "", "concat"], [5, 2, 1, "", "dask"], [5, 2, 1, "", "iterate"]], "heptools.root.io.TreeWriter": [[5, 2, 1, "", "__call__"], [5, 2, 1, "", "__enter__"], [5, 2, 1, "", "__exit__"], [5, 2, 1, "", "extend"], [5, 3, 1, "", "tree"]], "heptools.root.merge": [[5, 6, 1, "", "clean"], [5, 6, 1, "", "merge"], [5, 6, 1, "", "move"], [5, 6, 1, "", "resize"]], "heptools.system": [[2, 0, 0, "-", "eos"]], "heptools.system.eos": [[2, 1, 1, "", "EOS"], [1, 5, 1, "", "PathLike"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:attribute", "4": "py:property", "5": "py:data", "6": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "attribute", "Python attribute"], "4": ["py", "property", "Python property"], "5": ["py", "data", "Python data"], "6": ["py", "function", "Python function"]}, "titleterms": {"api": [0, 12], "refer": [0, 12], "type": 1, "alia": 1, "eo": 2, "todo": [2, 5], "random": 3, "number": 3, "gener": 3, "counter": 3, "base": 3, "root": 4, "basic": [5, 9], "i": 5, "o": 5, "ttree": 5, "dask": 5, "tree": [6, 9], "user": [7, 12], "guid": [7, 12], "how": 8, "construct": 9, "friend": 9, "usag": [9, 11], "With": 9, "coffea": 9, "0": 9, "7": 9, "22": 9, "2023": 9, "12": 9, "perform": 10, "awkward": 11, "memori": 11, "count": 11, "multipl": 11, "arrai": 11, "garbag": 11, "collect": 11, "concaten": 11, "hep": 12, "tool": 12, "exampl": 12}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.todo": 2, "sphinx": 60}, "alltitles": {"API reference": [[0, "api-reference"], [12, "api-reference"]], "Type Alias": [[1, "type-alias"]], "EOS": [[2, "module-heptools.system.eos"]], "Todo": [[2, "id1"], [5, "id1"], [5, "id2"], [5, "id3"]], "Random Number Generators": [[3, "module-heptools.math.random"]], "Counter-based": [[3, "counter-based"]], "ROOT": [[4, "module-heptools.root"]], "Basic I/O": [[5, "module-heptools.root.io"]], "TTree": [[5, "ttree"]], "dask": [[5, "dask"]], "Tree": [[6, "tree"]], "User guide": [[7, "user-guide"], [12, "user-guide"]], "How-to": [[8, "how-to"]], "Construct Friend Tree": [[9, "construct-friend-tree"]], "Basic Usage": [[9, "basic-usage"]], "With coffea<=0.7.22": [[9, "with-coffea-0-7-22"]], "With coffea>=2023.12.0": [[9, "with-coffea-2023-12-0"]], "Performance": [[10, "performance"]], "awkward": [[11, "awkward"]], "Memory Usage": [[11, "memory-usage"]], "Counting Memory for Multiple Arrays": [[11, "counting-memory-for-multiple-arrays"]], "Garbage Collection": [[11, "garbage-collection"]], "Concatenate": [[11, "concatenate"]], "HEP tools": [[12, "hep-tools"]], "Examples": [[12, "examples"]]}, "indexentries": {"delayedrecordlike (in module heptools.root.io)": [[1, "heptools.root.io.DelayedRecordLike"]], "pathlike (in module heptools.system.eos)": [[1, "heptools.system.eos.PathLike"]], "recordlike (in module heptools.root.io)": [[1, "heptools.root.io.RecordLike"]], "eos (class in heptools.system.eos)": [[2, "heptools.system.eos.EOS"]], "heptools.system.eos": [[2, "module-heptools.system.eos"]], "module": [[2, "module-heptools.system.eos"], [3, "module-heptools.math.random"], [4, "module-heptools.root"], [5, "module-heptools.root.io"]], "heptools.math.random": [[3, "module-heptools.math.random"]], "heptools.root": [[4, "module-heptools.root"]], "treereader (class in heptools.root.io)": [[5, "heptools.root.io.TreeReader"]], "treewriter (class in heptools.root.io)": [[5, "heptools.root.io.TreeWriter"]], "__call__() (heptools.root.io.treewriter method)": [[5, "heptools.root.io.TreeWriter.__call__"]], "__enter__() (heptools.root.io.treewriter method)": [[5, "heptools.root.io.TreeWriter.__enter__"]], "__exit__() (heptools.root.io.treewriter method)": [[5, "heptools.root.io.TreeWriter.__exit__"]], "arrays() (heptools.root.io.treereader method)": [[5, "heptools.root.io.TreeReader.arrays"]], "clean() (in module heptools.root.merge)": [[5, "heptools.root.merge.clean"]], "concat() (heptools.root.io.treereader method)": [[5, "heptools.root.io.TreeReader.concat"]], "dask() (heptools.root.io.treereader method)": [[5, "heptools.root.io.TreeReader.dask"]], "extend() (heptools.root.io.treewriter method)": [[5, "heptools.root.io.TreeWriter.extend"]], "heptools.root.io": [[5, "module-heptools.root.io"]], "iterate() (heptools.root.io.treereader method)": [[5, "heptools.root.io.TreeReader.iterate"]], "merge() (in module heptools.root.merge)": [[5, "heptools.root.merge.merge"]], "move() (in module heptools.root.merge)": [[5, "heptools.root.merge.move"]], "resize() (in module heptools.root.merge)": [[5, "heptools.root.merge.resize"]], "tree (heptools.root.io.treewriter attribute)": [[5, "heptools.root.io.TreeWriter.tree"]], "chain (class in heptools.root.chain)": [[6, "heptools.root.chain.Chain"]], "chunk (class in heptools.root.chunk)": [[6, "heptools.root.chunk.Chunk"]], "friend (class in heptools.root.chain)": [[6, "heptools.root.chain.Friend"]], "add() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.add"]], "add_chunk() (heptools.root.chain.chain method)": [[6, "heptools.root.chain.Chain.add_chunk"]], "add_friend() (heptools.root.chain.chain method)": [[6, "heptools.root.chain.Chain.add_friend"]], "arrays() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.arrays"]], "auto_dump() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.auto_dump"]], "balance() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.balance"]], "branches (heptools.root.chunk.chunk attribute)": [[6, "heptools.root.chunk.Chunk.branches"]], "clone() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.clone"]], "common() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.common"]], "concat() (heptools.root.chain.chain method)": [[6, "heptools.root.chain.Chain.concat"]], "concat() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.concat"]], "copy() (heptools.root.chain.chain method)": [[6, "heptools.root.chain.Chain.copy"]], "copy() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.copy"]], "dask() (heptools.root.chain.chain method)": [[6, "heptools.root.chain.Chain.dask"]], "dask() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.dask"]], "deepcopy() (heptools.root.chunk.chunk method)": [[6, "heptools.root.chunk.Chunk.deepcopy"]], "dump() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.dump"]], "entry_start (heptools.root.chunk.chunk property)": [[6, "heptools.root.chunk.Chunk.entry_start"]], "entry_stop (heptools.root.chunk.chunk property)": [[6, "heptools.root.chunk.Chunk.entry_stop"]], "from_coffea_datasets() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.from_coffea_datasets"]], "from_coffea_events() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.from_coffea_events"]], "from_json() (heptools.root.chain.friend class method)": [[6, "heptools.root.chain.Friend.from_json"]], "from_json() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.from_json"]], "from_path() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.from_path"]], "integrity() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.integrity"]], "integrity() (heptools.root.chunk.chunk method)": [[6, "heptools.root.chunk.Chunk.integrity"]], "iterate() (heptools.root.chain.chain method)": [[6, "heptools.root.chain.Chain.iterate"]], "merge() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.merge"]], "name (heptools.root.chain.friend attribute)": [[6, "heptools.root.chain.Friend.name"]], "name (heptools.root.chunk.chunk attribute)": [[6, "heptools.root.chunk.Chunk.name"]], "num_entries (heptools.root.chunk.chunk attribute)": [[6, "heptools.root.chunk.Chunk.num_entries"]], "offset (heptools.root.chunk.chunk property)": [[6, "heptools.root.chunk.Chunk.offset"]], "partition() (heptools.root.chunk.chunk class method)": [[6, "heptools.root.chunk.Chunk.partition"]], "path (heptools.root.chunk.chunk attribute)": [[6, "heptools.root.chunk.Chunk.path"]], "reset() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.reset"]], "slice() (heptools.root.chunk.chunk method)": [[6, "heptools.root.chunk.Chunk.slice"]], "targets (heptools.root.chain.friend property)": [[6, "heptools.root.chain.Friend.targets"]], "to_json() (heptools.root.chain.friend method)": [[6, "heptools.root.chain.Friend.to_json"]], "to_json() (heptools.root.chunk.chunk method)": [[6, "heptools.root.chunk.Chunk.to_json"]], "uuid (heptools.root.chunk.chunk attribute)": [[6, "heptools.root.chunk.Chunk.uuid"]]}})